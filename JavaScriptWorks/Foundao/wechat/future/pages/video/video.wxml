<!--pages/video.wxml-->
<view class="videoItem-videoBox">
    <view class="video-box" animation="{{animationData}}">
        <video controls="{{false}}"
               autoplay="{{true}}"
               hidden="{{showVideo}}"
               src="{{cur_video.video_url}}"
               poster=""
               loop="{{true}}"
               id="video"
               objectFit="{{fit?'cover':'contain'}}"
               bindplay="bindplay"
               bindpause="bindpause"
               bindtimeupdate="bindtimeupdate">

            <!--覆盖框-->
            <cover-view class="cover-box" bindtap="videoClick" wx:if="loaded">

                <cover-view class="back-btn  {{isIpx?'iphoneX-back-btn':''}}" catchtap="goBack">
                    <cover-image class="back-btn-img"
                                 src="https://www.newscctv.net/dw/resource/future/1return4.png"></cover-image>
                </cover-view>

                <!--话题-->
                <!--<cover-view class="topic-box">-->
                <!--&lt;!&ndash;话题icon&ndash;&gt;-->
                <!--<cover-view class="topic-icon-box">-->
                <!--<cover-image class="topic-icon"-->
                <!--src="https://www.newscctv.net/dw/resource/future/1huati@2x.png"></cover-image>-->
                <!--<cover-view class="topic-text">专题</cover-view>-->
                <!--</cover-view>-->
                <!--&lt;!&ndash;话题组&ndash;&gt;-->
                <!--<cover-view class="topic-list">-->
                <!--<cover-view class="topic-item {{cur_type==0?'selected':''}}" catchtap="switchSpecial">精选-->
                <!--</cover-view>-->
                <!--<block wx:for="{{type_list}}">-->
                <!--<cover-view class="topic-item {{cur_type==item.id?'selected':''}}" catchtap="switchType"-->
                <!--data-data="{{item}}">{{item.name}}-->
                <!--</cover-view>-->
                <!--</block>-->
                <!--</cover-view>-->
                <!--</cover-view>-->
                <!--按钮组-->

                <!--弹出框-->
                <!--<cover-view class="open-btn-box {{btnStatus?'openStatus':''}}">-->
                <!--&lt;!&ndash;其他按钮&ndash;&gt;-->
                <!--<cover-image class="btn-item"-->
                <!--src="https://www.newscctv.net/dw/resource/future/1peiyin@2x.png" bindtap="switchToDubbing"></cover-image>-->
                <!--<cover-image class="btn-item"-->
                <!--src="https://www.newscctv.net/dw/resource/future/1luxiang@2x.png"></cover-image>-->
                <!--<cover-image class="btn-item"-->
                <!--src="https://www.newscctv.net/dw/resource/future/1bendi@2x.png"></cover-image>-->
                <!--&lt;!&ndash;控制按钮&ndash;&gt;-->
                <!--<cover-view class="controls-btn" catchtap="toggleBtn">-->
                <!--<cover-image class="controls-btn-icon"-->
                <!--src="https://www.newscctv.net/dw/resource/future/1gengduo@2x.png"></cover-image>-->
                <!--</cover-view>-->
                <!--</cover-view>-->
                <!--按钮-->
                <cover-image class="play-btn" src="https://www.newscctv.net/dw/resource/future/1play.png"
                             wx:if="{{!playing&&hasPlayed}}"></cover-image>

                <cover-view class="button-box" hidden="{{is_user}}">
                    <!--挑战+喜欢+分享-->
                    <cover-view class="button-item" catchtap="challenge" hidden="{{cur_video.is_dub!=2}}">
                        <cover-image class="button-item-icon chanllenge"
                                     src="https://www.newscctv.net/dw/resource/future/1tiaozhan@2x.png"></cover-image>
                        <cover-view class="button-item-text">挑战ta</cover-view>
                    </cover-view>
                    <cover-view class="button-item">
                        <cover-image class="button-item-icon"
                                     src="https://www.newscctv.net/dw/resource/future/1xihuan1@2x.png"
                                     wx:if="{{cur_video.is_zan==1}}"
                                     catchtap="like"></cover-image>
                        <cover-image class="button-item-icon"
                                     catchtap="dislike"
                                     src="https://www.newscctv.net/dw/resource/future/1xihuan2@2x.png"
                                     wx:if="{{cur_video.is_zan!==1}}"></cover-image>
                        <cover-view class="button-item-text">喜欢</cover-view>
                    </cover-view>
                    <cover-view class="button-item share" catchtap="share">
                        <cover-image class="button-item-icon share"
                                     src="https://www.newscctv.net/dw/resource/future/1fenxiang@2x.png"></cover-image>
                        <cover-view class="button-item-text">分享</cover-view>
                    </cover-view>
                </cover-view>
                <!--底部信息-->
                <cover-view class="bottom-box">
                    <!--用户信息-->
                    <cover-view class="userinfo-box">
                        <cover-image class="user-head" src="{{cur_video.nick_pic}}" catchtap="goUser"></cover-image>
                        <cover-view class="user-name">{{cur_video.nick_name}}</cover-view>
                        <cover-view class="attention-box" wx:if="{{cur_video.is_follow==1}}" catchtap="fabulous"
                                    hidden="{{cur_video.is_user==1}}">
                            <cover-image class="attention-icon"
                                         src="https://www.newscctv.net/dw/resource/future/1gengduo@2x.png"></cover-image>
                            <cover-view class="attention-icon-text">关注</cover-view>
                        </cover-view>
                        <cover-view class="attention-already" wx:if="{{cur_video.is_follow==2}}"
                                    catchtap="del_fabulous" hidden="{{cur_video.is_user==1}}">
                            <cover-image class="attention-already-icon"
                                         src="https://www.newscctv.net/dw/resource/future/1duigou@2x.png"></cover-image>
                        </cover-view>
                    </cover-view>
                    <!--简介-->
                    <cover-view class="content">{{cur_video.video_desc}}</cover-view>
                </cover-view>
                <!--进度条-->
                <cover-view class="progress-box">
                    <cover-view class="progress" style="width:{{progress*100}}%"></cover-view>
                </cover-view>
            </cover-view>

            <!--分享浮层-->
            <cover-view class="poster_layer" wx:if="{{show_share}}" bindtap="close_poster_layer">
                <!--选项-->
                <cover-view class="select-box" wx:if="{{show_select}}">
                    <!--<cover-view class="select-text">分享到</cover-view>-->
                    <cover-view class="select-content">
                        <button class="select-item" catchtap="create_poster">生成海报</button>
                        <button class="select-item" open-type="share">分享给好友</button>
                    </cover-view>
                </cover-view>
                <!--海报-->
                <cover-view class="save_poster" wx:if="{{show_poster}}">
                    <cover-image src="{{canvas_poster_url}}" mode="aspectFill" class="poster"></cover-image>
                    <cover-view class="text">保存图片，分享给你的小伙伴吧</cover-view>
                    <cover-view class="btn_save_img" catchtap="save_poster">保存</cover-view>
                </cover-view>
            </cover-view>
        </video>

        <!--canvas-->
        <canvas class="canvas_poster" canvas-id="canvas_poster"></canvas>
    </view>
</view>