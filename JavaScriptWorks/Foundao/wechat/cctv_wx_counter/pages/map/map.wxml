<!--pages/map/map.wxml-->
<scroll-view class='map-box'>
  <!--西北区地图-->
  <view class='map_xibei' wx:if="{{ mapType === 2 }}">
    <image
    class='map-img'
    mode='widthFix'
    src='https://s-js.sports.cctv.com/host/resource/map/map_xibei1.png'></image>
    <view class='progress-box' style='height:{{mapHeight}}'></view>
    <view class='map_mark' catchtap="gotoSeeNews" style='top:{{marskTop}};left:{{marskLeft}}'></view>
  </view>
  <!--华北区地图-->
  <view class='map_huabei' wx:elif="{{ mapType === 3}}">
    <image
    class='map-img'
    mode='widthFix'
    src='https://s-js.sports.cctv.com/host/resource/map/map_huabei1.png'></image>
    <view class='progress-box' style='height:{{mapHeight}}'></view>
    <view class='map_mark' catchtap="gotoSeeNews" style='top:{{marskTop}};left:{{marskLeft}}'></view>
  </view>
  <!--东北区地图-->
  <view class='map_dongbei' wx:elif="{{ mapType === 1}}">
    <image
    class='map-img'
    mode='widthFix'
    src='https://s-js.sports.cctv.com/host/resource/map/map_dongbei1.png'></image>
    <view class='progress-box' style='height:{{mapHeight}}'></view>
    <view class='map_mark' catchtap="gotoSeeNews" style='top:{{marskTop}};left:{{marskLeft}}'></view>
  </view>
  <!--华东区地图-->
  <view class='map_huadong' wx:elif="{{ mapType === 4}}">
    <image
    class='map-img'
    mode='widthFix'
    src='https://s-js.sports.cctv.com/host/resource/map/map_huadong1.png'></image>
    <view class='progress-box' style='height:{{mapHeight}}'></view>
    <view class='map_mark' catchtap="gotoSeeNews" style='top:{{marskTop}};left:{{marskLeft}}'></view>
  </view>
  <!--华南区地图-->
  <view class='map_huanan' wx:elif="{{ mapType === 6}}">
    <image
    class='map-img'
    mode='widthFix'
    src='https://s-js.sports.cctv.com/host/resource/map/map_huanan1.png'></image>
    <view class='progress-box' style='height:{{mapHeight}}'></view>
    <view class='map_mark' catchtap="gotoSeeNews" style='top:{{marskTop}};left:{{marskLeft}}'></view>
  </view>
  <!--西南区地图-->
  <view class='map_xinan' wx:elif="{{ mapType === 5}}">
    <image
    class='map-img'
    mode='widthFix'
    src='https://s-js.sports.cctv.com/host/resource/map/map_xinan1.png'></image>
    <view class='progress-box' style='height:{{mapHeight}}'></view>
    <view class='map_mark' catchtap="gotoSeeNews" style='top:{{marskTop}};left:{{marskLeft}}'></view>
  </view>
  <!--人民大会堂-->
  <view class="last-pic {{lastOpacity}}">
    <image class="rmdht-pic" src="https://s-js.sports.cctv.com/host/resource/map/rmdht_pic.png"></image>
  </view>
</scroll-view>
<!--用户信息-->
<view class='userInfo-box'>
  <view>
    <image
      class='userImg'
      src='{{avatarUrl}}'
    ></image>
    <view class='userInfo'>
      <view class='online-person'>在线用户：{{onlinePerson}}</view>
      <h2>{{userName}}</h2>
      <h3 wx:if="{{isFirstplay===true}}">累积贡献{{totalCalorie}}步数，现在出发！</h3>
      <h3 wx:else >累积贡献{{totalCalorie}}步数，现在已到达“{{currSite}}站”！</h3>
    </view>
    <view class='userInfo-btnbox'>
      <view class='gotoRank' catchtap='gotoRank'>查看排行榜</view>
      <view class='changeRoad' catchtap='changeRoad'>更换路线</view>
    </view>
  </view>
</view>
<!--向部长留言-->
<view class="questionsToMinister" catchtap="askForMinister"></view>
<!--游戏规则-->
<view class="game_rule" catchtap="openRule"></view>
<!--加速卡-->
<view class='maskLayer acceleratorMask' catchtap="closeAccPopup"  wx:if="{{ isShowAccDialog === true }}">
  <view class='accelerator'>
    <view class='accelerator-view-first'>恭喜你</view>
    <view>你使用加速卡一共前进了{{hasAccNum}}站！</view>
  </view>
</view>
<!--还差多少未到-->
<view class='maskLayer notArrivedMask'  catchtap="closePopup"
      da1="{{isShowDialog}}" da2="{{isArrive}}"
      wx:if="{{ isShowDialog === true && isArrive===false}}">
  <view class='notArrived' catchtap="stopMp">
    <view class='notArrived-view-first'>还差{{chaCalorie}}步数</view>
    <view>就能到达“{{arriveSoon}}”站啦！</view>
    <view>快去答题吧</view>
    <view class='notArrived-btn-box' catchtap="gotoQuestion">
        去答题
    </view>
  </view>
</view>
<!--到达某地-->
<view class='maskLayer arrivedWhereMask' catchtap="closePopup"
      wx:if="{{ (dialogisShow===true && isSpecialSite === false && isArrive===true) ||(isUserAcc===true && isSpecialSite === false && isArrive===true) || (isReturn===true && isSpecialSite === false) || (isSpecialSite === false && isShowDialog === true && isFirstIn===true && isArrive===true)}}">
  <view class='arrivedWhere' catchtap="stopMp">
    <view class='arrivedWhere-first-view'>恭喜你</view>
    <view>到达“{{currSite}}”站</view>
    <view class='arrivedWhere-btn-box' wx:if="{{isReturn===false}}">
      <view class='btn-item' catchtap="gotoQuestion" data-id="{{isanswer}}" wx:if="{{isanswer === false}}">去答题</view>
      <view class='btn-item newsitem' catchtap="gotoSeeNews">看热点</view>
    </view>
    <view class='arrivedWhere-btn-box isr' wx:if="{{isReturn===true}}">
      <view class='btn-item' catchtap="gotoSeeNews">看热点</view>
    </view>
  </view>
</view>
<!--倒数第二站提示-->
<view class="maskLayer lastSecondMask" catchtap="closelastTips" wx:if="{{ isLastSecond === true && ismove===false }}">
  <view class="lastSecond"  catchtap="stopMp">
    <view class="lastSecond-first-view">恭喜你</view>
    <view>距离终点仅剩一站，快去答题吧！</view>
    <view class="lastSecond-btn" catchtap="gotoQuestion">去答题</view>
  </view>
</view>
<!--特殊站点-->
<view class='maskLayer specialMask' catchtap="closePopup"  wx:if="{{ (dialogisShow===true &&  isSpecialSite === true && isArrive===true)|| (isUserAcc===true && isSpecialSite === true && isArrive===true)|| (isReturn===true && isSpecialSite === true) || (isSpecialSite === true && isShowDialog === true && isFirstIn===true && isArrive===true)}}">
  <view class='special' catchtap="stopMp">
    <canvas canvas-id='specialCanvas' class="canvascss"></canvas>
    <image  class='specialCanvas' src="{{poster_url}}"></image>
    <view class='saveSpecialPost' catchtap="savePoster">保存海报</view>
  </view>
  <view class='special-btn-box' wx:if="{{isReturn===false}}">
    <view class='btn-item' catchtap="gotoQuestion" wx:if="{{isanswer === false}}">去答题</view>
    <view class='btn-item newsitem' catchtap="gotoSeeNews">看热点</view>
  </view>
  <view class='special-btn-box isr' wx:if="{{isReturn===true}}">
    <view class='btn-item' catchtap="gotoSeeNews">看热点</view>
  </view>
</view>
<!--分享提示-->
<view class="shareTips" catchtap="closeTipsPopup" wx:if="{{isFirstIn===true && istips === true}}">
    <image
    class='share-tips'
    mode='widthFix'
    src='https://s-js.sports.cctv.com/host/resource/map/share-tips.png'></image>
</view>
<!--新闻列表-->
<view class="newsDialog" catchtap="closeNewsList" wx:if="{{isNewsList}}">
  <newsList/>
</view>
<!--刷新-->
<view class="renovate" catchtap="renovatePage"></view>
<!--游戏规则-->
<view class="rule-outBox" wx:if="{{gamerule===true}}">
  <view class="rule-innerBox">
    <view class="rule-title"></view>
    <view class="rule-text">
      <view class ='rule-text-item'>1、以活动结束前一天晚上24点的总步数进行排名，top3的用户均可获得大奖一份： 第一名：VIVO子品牌IQOO新上市手机一部；第二名及第三名：小米9手机1000元代金券。</view>
      <view class ='rule-text-item'>2、任意选择一条路线均可在第10天到达终点，参加幸运大转盘抽奖活动，奖品如下： 100元话费红包及摩拜折扣券不限量；小米9手机300元代金券、VR眼镜、百度网盘会员月卡、喜马拉雅会员月卡、掌阅会员月卡等~</view>
      <view class ='rule-text-item'>3、每日开启一个站点，3000步即可到达当天站点参与答题、观看两会最新资讯。</view>
      <view class ='rule-text-item'>4、随时“给部长留言”，优质留言提问有机会在《中国新闻》节目中展示，并得到部长的回答。</view>
      <view class ='rule-text-item'>5、晚到的用户也不用担心，加速卡将为您加速前进，带你到达终点。</view>
    </view>
    <view class="close-rule-btn" catchtap="closeRule">我知道啦</view>
  </view>
</view>
<!--去抽奖-->
<view class="lucyDraw" catchtap="gotolucyDraw"></view>
<musicControl/>