{"ast":null,"code":"import _classCallCheck from \"/Users/HeroMeiKong/JobSpace/JavaScriptWorks/foundao/ReactWeb/dh_h5/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/HeroMeiKong/JobSpace/JavaScriptWorks/foundao/ReactWeb/dh_h5/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/HeroMeiKong/JobSpace/JavaScriptWorks/foundao/ReactWeb/dh_h5/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/HeroMeiKong/JobSpace/JavaScriptWorks/foundao/ReactWeb/dh_h5/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/HeroMeiKong/JobSpace/JavaScriptWorks/foundao/ReactWeb/dh_h5/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/HeroMeiKong/JobSpace/JavaScriptWorks/foundao/ReactWeb/dh_h5/src/components/Answer/index.js\";\nimport React, { Component } from 'react';\nimport './index.scss';\nimport bg from '../../assets/home_top_bg.png';\nimport $ from \"jquery\";\nimport api from \"../../API/api\";\n\nvar Answer =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Answer, _Component);\n\n  function Answer(props) {\n    var _this2;\n\n    _classCallCheck(this, Answer);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(Answer).call(this, props));\n\n    _this2.getRecommendData = function () {\n      $.ajax({\n        type: 'GET',\n        dataType: \"jsonp\",\n        url: api.recommendList + 'setAnswer',\n        data: {}\n      });\n    };\n\n    _this2.getOnlinePerson = function () {\n      $.ajax({\n        type: 'GET',\n        dataType: 'jsonp',\n        url: api.onlinePerson + 'getOnline'\n      });\n    };\n\n    _this2.answerIsShow = function () {\n      var answerData = _this2.state.answerData;\n      var curr = new Date().getTime() / 1000;\n\n      if (answerData.isShow / 1 === 1) {\n        // console.log(answerData.startTime)\n        if (curr >= answerData.startTime && curr < answerData.endTime) {\n          _this2.setState({\n            answerflag: true\n          });\n        } else {\n          _this2.setState({\n            answerflag: false\n          });\n        }\n      } else {\n        _this2.setState({\n          answerflag: false\n        });\n      }\n    };\n\n    _this2.state = {\n      answerflag: false,\n      answerData: {},\n      totalPerson: '0'\n    };\n    return _this2;\n  }\n\n  _createClass(Answer, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {// let sv ;\n      // let _this = this;\n      // sv=setInterval(\n      //   function () {\n      //     _this.getOnlinePerson();\n      //   },5000)\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getRecommendData();\n\n      var _this = this;\n      /*推荐回调函数*/\n\n\n      window.setAnswer = function (resp) {\n        // console.log(resp)\n        _this.setState({\n          answerData: resp.data.yuyue[0] || {}\n        }, function () {\n          _this.answerIsShow();\n        });\n      };\n\n      window.getOnline = function (resp) {\n        // console.log(resp)\n        _this.setState({\n          totalPerson: resp.total || '0'\n        });\n      };\n    }\n    /*获取推荐的数据*/\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          answerData = _this$state.answerData,\n          totalPerson = _this$state.totalPerson,\n          answerflag = _this$state.answerflag;\n      var bgcover = answerData.imgUrl || bg;\n\n      if (answerflag) {\n        return React.createElement(\"div\", {\n          className: \"answer-box\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"answer-inner\",\n          style: {\n            backgroundImage: 'url(' + bgcover + ')'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88\n          },\n          __self: this\n        }), React.createElement(\"a\", {\n          href: answerData.pcUrl,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 93\n          },\n          __self: this\n        }));\n      } else {\n        return '';\n      }\n    }\n  }]);\n\n  return Answer;\n}(Component);\n\nexport { Answer as default };","map":{"version":3,"sources":["/Users/HeroMeiKong/JobSpace/JavaScriptWorks/foundao/ReactWeb/dh_h5/src/components/Answer/index.js"],"names":["React","Component","bg","$","api","Answer","props","getRecommendData","ajax","type","dataType","url","recommendList","data","getOnlinePerson","onlinePerson","answerIsShow","answerData","state","curr","Date","getTime","isShow","startTime","endTime","setState","answerflag","totalPerson","_this","window","setAnswer","resp","yuyue","getOnline","total","bgcover","imgUrl","backgroundImage","pcUrl"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport './index.scss';\nimport bg from '../../assets/home_top_bg.png'\nimport $ from \"jquery\";\nimport api from \"../../API/api\";\nexport default class Answer extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      answerflag:false,\n      answerData:{},\n      totalPerson:'0'\n    };\n  }\n\n  componentWillMount() {\n    // let sv ;\n    // let _this = this;\n    // sv=setInterval(\n    //   function () {\n    //     _this.getOnlinePerson();\n    //   },5000)\n\n  }\n\n  componentDidMount() {\n    this.getRecommendData();\n    let _this = this;\n    /*推荐回调函数*/\n    window.setAnswer=function(resp){\n      // console.log(resp)\n      _this.setState({\n        answerData:resp.data.yuyue[0]||{},\n      },function () {\n        _this.answerIsShow()\n      })\n    };\n    window.getOnline=function (resp) {\n      // console.log(resp)\n      _this.setState({\n        totalPerson:resp.total||'0'\n      })\n    };\n  }\n  /*获取推荐的数据*/\n  getRecommendData=()=>{\n    $.ajax({\n      type:'GET',\n      dataType: \"jsonp\",\n      url:api.recommendList+'setAnswer',\n      data:{},\n    })\n  };\n  getOnlinePerson=()=>{\n    $.ajax({\n      type: 'GET',\n      dataType: 'jsonp',\n      url: api.onlinePerson+'getOnline'\n    })\n  }\n  /*判断同步答题是否显示*/\n  answerIsShow=()=>{\n    const {answerData} = this.state;\n    let curr = new Date().getTime() / 1000;\n    if(answerData.isShow/1===1){\n      // console.log(answerData.startTime)\n      if(curr>=answerData.startTime&&curr<answerData.endTime){\n        this.setState({\n          answerflag:true\n        })\n      }else {\n        this.setState({\n          answerflag:false\n        })\n      }\n    }else {\n      this.setState({\n        answerflag:false\n      })\n    }\n  };\n  render() {\n    const {answerData,totalPerson ,answerflag} = this.state;\n    let bgcover = answerData.imgUrl || bg;\n    if(answerflag){\n      return (\n        <div className='answer-box'>\n          <div className='answer-inner'\n               style={{ backgroundImage:'url('+bgcover+')'}}>\n            {/*<p>与{totalPerson}人一起参与互动</p>*/}\n            {/*<h2>同步答题</h2>*/}\n          </div>\n          <a href={answerData.pcUrl}></a>\n        </div>\n      )\n    }else {\n      return ''\n    }\n  }\n}"]},"metadata":{},"sourceType":"module"}