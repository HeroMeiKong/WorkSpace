{"ast":null,"code":"import _classCallCheck from \"/Users/HeroMeiKong/JobSpace/JavaScriptWorks/foundao/ReactWeb/dh_h5/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/HeroMeiKong/JobSpace/JavaScriptWorks/foundao/ReactWeb/dh_h5/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/HeroMeiKong/JobSpace/JavaScriptWorks/foundao/ReactWeb/dh_h5/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/HeroMeiKong/JobSpace/JavaScriptWorks/foundao/ReactWeb/dh_h5/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/HeroMeiKong/JobSpace/JavaScriptWorks/foundao/ReactWeb/dh_h5/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/HeroMeiKong/JobSpace/JavaScriptWorks/foundao/ReactWeb/dh_h5/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/HeroMeiKong/JobSpace/JavaScriptWorks/foundao/ReactWeb/dh_h5/src/components/pageHeader/index.js\";\nimport React, { Component } from 'react';\nimport { Link, withRouter } from 'react-router-dom';\nimport logo from '../../assets/logo.png';\nimport $ from \"jquery\";\nimport api from \"../../API/api\";\nimport tool from \"../../tool\";\nimport './index.scss';\n\nvar Recommend =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Recommend, _Component);\n\n  function Recommend(props) {\n    var _this2;\n\n    _classCallCheck(this, Recommend);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(Recommend).call(this, props));\n\n    _this2.shareWx = function () {\n      var data = _this2.state.data;\n\n      var t,\n          _this = _assertThisInitialized(_assertThisInitialized(_this2));\n\n      t = setInterval(function () {\n        if (data.mediaName) {\n          _this.getConfigInfo(data);\n\n          clearInterval(t);\n        } else {\n          return false;\n        }\n      }, 500);\n    };\n\n    _this2.getyshInfo = function () {\n      $.ajax({\n        type: 'GET',\n        dataType: \"jsonp\",\n        url: api.pageHeader + 'setPageHeader',\n        data: {}\n      });\n    };\n\n    _this2.getRecommendData = function () {\n      $.ajax({\n        type: 'GET',\n        dataType: \"jsonp\",\n        url: api.recommendList + 'setData',\n        data: {}\n      });\n    };\n\n    _this2.getConfigInfo = function (data) {\n      $.ajax({\n        dataType: \"jsonp\",\n        type: 'GET',\n        url: 'http://appms.app.cntvwb.cn/appms/wxjs/getsign.do',\n        timeout: 10000,\n        jsonp: 'cb',\n        jsonpCallback: 'wx_sign_cb',\n        data: {\n          appid: \"wx6736e1ee7f82ba26\",\n          url: window.location.href.split('#')[0],\n          f: \"jsonp\"\n        },\n        success: function success(resp) {\n          window.wx.config({\n            debug: false,\n            appId: \"wx6736e1ee7f82ba26\",\n            timestamp: resp.data.timestamp,\n            nonceStr: resp.data.nonceStr,\n            signature: resp.data.signature,\n            jsApiList: ['checkJsApi', 'onMenuShareTimeline', 'onMenuShareAppMessage', 'onMenuShareQQ', 'onMenuShareWeibo']\n          });\n          window.wx.ready(function () {\n            window.wx.onMenuShareAppMessage({\n              title: data.mediaName,\n              desc: data.biref,\n              // 分享描述\n              link: window.location.href,\n              imgUrl: data.logoImg || '',\n              success: function success(res) {\n                // 设置成功\n                console.log('微信分享成功');\n              },\n              cancel: function cancel(res) {},\n              fail: function fail(result) {\n                console.log(result);\n              }\n            }); // “分享到朋友圈”及“分享到QQ空间”  无描述\n\n            window.wx.onMenuShareTimeline({\n              title: data.mediaName,\n              link: window.location.href,\n              imgUrl: data.logoImg || '',\n              success: function success() {\n                // 设置成功\n                console.log('微信分享成功');\n              }\n            });\n          });\n        }\n      });\n    };\n\n    _this2.fellowSC = function () {\n      var mid = '17aQfAjy0815';\n\n      if (tool.is_wxBrowser()) {\n        tool.jumpToApp('23', mid);\n      } else if (tool.is_shici()) {\n        if (window.localStorage.getItem(\"user_info\")) {\n          var user_info = JSON.parse(window.localStorage.getItem('user_info'));\n\n          if (user_info.userId.length < 1) {\n            window.location.href = 'login://app.cctv.cn';\n          } else {\n            // alert('点击了关注按钮');\n            $.ajax({\n              type: 'GET',\n              dataType: \"jsonp\",\n              url: api.sub + '&cb=fellowCB',\n              data: {\n                uid: user_info.userId\n              }\n            });\n          }\n        } else {\n          window.location.href = 'login://app.cctv.cn';\n        }\n      } else {\n        tool.jumpToApp('23', mid);\n      }\n    };\n\n    _this2.unSubed = function () {\n      var mid = '17aQfAjy0815';\n\n      if (tool.is_wxBrowser()) {\n        tool.jumpToApp('23', mid);\n      } else if (tool.is_shici()) {\n        // alert('环境：客户端');\n        if (window.localStorage.getItem(\"user_info\")) {\n          var user_info = JSON.parse(window.localStorage.getItem('user_info')); // console.log(user_info);\n\n          if (user_info.userId.length < 1) {\n            window.location.href = 'login://app.cctv.cn';\n            return false;\n          } // alert('点击了取消关注');\n\n\n          $.ajax({\n            dataType: \"jsonp\",\n            type: 'GET',\n            url: api.unsub + '&cb=unSubCB',\n            data: {\n              mid: \"17aQfAjy0815\",\n              uid: user_info.userId\n            }\n          });\n        } else {\n          window.location.href = 'login://cctv.cn';\n        }\n      } else {\n        tool.jumpToApp('23', mid);\n      }\n    };\n\n    _this2.state = {\n      data: {},\n      pagedata: {},\n      userInfo: {},\n      isSubed: false\n    };\n    return _this2;\n  }\n\n  _createClass(Recommend, [{\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps, nextContext) {\n      // console.log(this.props)\n      if (this.props.location.pathname === '/recommend' || this.props.location.pathname === '/') {\n        window.sessionStorage.setItem('top', 0);\n      } else {\n        window.sessionStorage.setItem('top', $(document).scrollTop());\n      }\n    } // componentWillUpdate(nextProps, nextState, nextContext) {\n    //   console.log(window.sessionStorage.getItem('top'));\n    //\n    // }\n\n  }, {\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      if (navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)) {} else {\n        /**\n         * PC地址 **/\n        window.location.href = \"http://tv.cctv.com/lm/duihua/?spm=C28340.PSfu2aQvxDti.EYGi0YaFIj8C.264\";\n      }\n\n      this.getyshInfo();\n      this.getRecommendData();\n\n      var _this = this;\n\n      window.setPageHeader = function (resp) {\n        _this.setState({\n          data: resp.data\n        }, function () {\n          _this.shareWx();\n\n          var data = _this.state.data; // console.log(data);\n        });\n      };\n\n      window.setData = function (resp) {\n        $('title').html(resp.data.pushListUrl);\n\n        _this.setState({\n          pagedata: resp.data\n        }, function () {\n          var pagedata = this.state.pagedata;\n          sessionStorage.setItem('firstNav', JSON.stringify(pagedata));\n        });\n      };\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this = this;\n\n      if (tool.is_shici()) {\n        var isSub = sessionStorage.getItem('isSubed');\n\n        if (isSub / 1) {\n          this.setState({\n            isSubed: 1\n          });\n        } else {\n          this.setState({\n            isSubed: 0\n          });\n        }\n      }\n\n      window.fellowCB = function (resp) {\n        // console.log(resp.data)\n        if (resp.data === 'OK') {\n          _this.setState({\n            isSubed: true\n          });\n\n          sessionStorage.setItem('isSubed', 1);\n        } else if (resp.data === 'Subed') {\n          _this.setState({\n            isSubed: true\n          });\n\n          sessionStorage.setItem('isSubed', 1);\n        } else {\n          window.location.href = 'login://app.cctv.cn';\n        }\n      };\n\n      window.unSubCB = function (resp) {\n        if (resp.data === 'OK') {\n          _this.setState({\n            isSubed: false\n          });\n\n          sessionStorage.setItem('isSubed', 0);\n        } else if (resp.data === 'unSub') {\n          _this.setState({\n            isSubed: false\n          });\n\n          sessionStorage.setItem('isSubed', 0);\n        } else {\n          window.location.href = 'login://app.cctv.cn';\n        }\n      };\n    }\n    /*wxShare*/\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$state = this.state,\n          data = _this$state.data,\n          isSubed = _this$state.isSubed,\n          pagedata = _this$state.pagedata;\n      console.log(data.bgImg);\n      var categoryList = pagedata.categoryList ? pagedata.categoryList : [];\n      return React.createElement(\"div\", {\n        className: \"page-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"page-info\",\n        style: {\n          backgroundImage: 'url(' + data.bgImg + ')'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        className: \"limit-line1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267\n        },\n        __self: this\n      }, data.mediaName), React.createElement(\"div\", {\n        className: \"fellow-box\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269\n        },\n        __self: this\n      }, data.besubscribed), \" \\u7C89\\u4E1D\"), isSubed ? React.createElement(\"a\", {\n        onClick: this.unSubed,\n        style: {\n          background: 'rgba(222,222,222,.3)'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271\n        },\n        __self: this\n      }, \"\\u5DF2\\u5173\\u6CE8\") : React.createElement(\"a\", {\n        onClick: this.fellowSC,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273\n        },\n        __self: this\n      }, \"+\\u5173\\u6CE8\")), React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276\n        },\n        __self: this\n      }, data.biref), React.createElement(\"div\", {\n        className: \"palywhere\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 277\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278\n        },\n        __self: this\n      }, data.tvChName), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279\n        },\n        __self: this\n      }, pagedata.liveCategoryControl)), React.createElement(\"div\", {\n        className: \"logobox\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: data.logoImg || '',\n        alt: \"logo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282\n        },\n        __self: this\n      }))), React.createElement(\"ul\", {\n        className: \"page-nav\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        className: this.props.location.pathname === '/recommend' || this.props.location.pathname === '/' ? \"on\" : \"\",\n        key: \"recommend\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 286\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: \"#/recommend\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289\n        },\n        __self: this\n      }, \"\\u63A8\\u8350\")), categoryList.map(function (item) {\n        if (item.category / 1 === 1) {\n          return React.createElement(\"li\", {\n            className: _this3.props.location.pathname === '/recommend/' + item.sign ? \"on\" : \"\",\n            key: item.sign,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 294\n            },\n            __self: this\n          }, React.createElement(Link, {\n            to: '#/recommend/' + item.sign,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 297\n            },\n            __self: this\n          }, item.title));\n        } else if (item.category / 1 === 2) {\n          return React.createElement(\"li\", {\n            className: _this3.props.location.pathname === '/talkingPoetry/' + item.sign ? \"on\" : \"\",\n            key: item.sign,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 302\n            },\n            __self: this\n          }, React.createElement(Link, {\n            to: '/talkingPoetry/' + item.sign,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 305\n            },\n            __self: this\n          }, item.title));\n        } else if (item.category / 1 === 3) {\n          return React.createElement(\"li\", {\n            className: _this3.props.location.pathname === '/lookPoetry/' + item.sign ? \"on\" : \"\",\n            key: item.sign,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 310\n            },\n            __self: this\n          }, React.createElement(Link, {\n            to: '/lookPoetry/' + item.sign,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 313\n            },\n            __self: this\n          }, item.title));\n        } else if (item.category / 1 === 4) {\n          return React.createElement(\"li\", {\n            className: _this3.props.location.pathname === '/lookPoetry2/' + item.sign ? \"on\" : \"\",\n            key: item.sign,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 318\n            },\n            __self: this\n          }, React.createElement(Link, {\n            to: '/lookPoetry2/' + item.sign,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 321\n            },\n            __self: this\n          }, item.title));\n        } else if (item.category / 1 === 5) {\n          return React.createElement(\"li\", {\n            className: _this3.props.location.pathname === '/PopularityList/' + item.sign ? \"on\" : \"\",\n            key: item.sign,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 326\n            },\n            __self: this\n          }, React.createElement(Link, {\n            to: '/PopularityList/' + item.sign,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 329\n            },\n            __self: this\n          }, item.title));\n        }\n      })));\n    }\n  }]);\n\n  return Recommend;\n}(Component);\n\nexport default withRouter(Recommend);","map":{"version":3,"sources":["/Users/HeroMeiKong/JobSpace/JavaScriptWorks/foundao/ReactWeb/dh_h5/src/components/pageHeader/index.js"],"names":["React","Component","Link","withRouter","logo","$","api","tool","Recommend","props","shareWx","data","state","t","_this","setInterval","mediaName","getConfigInfo","clearInterval","getyshInfo","ajax","type","dataType","url","pageHeader","getRecommendData","recommendList","timeout","jsonp","jsonpCallback","appid","window","location","href","split","f","success","resp","wx","config","debug","appId","timestamp","nonceStr","signature","jsApiList","ready","onMenuShareAppMessage","title","desc","biref","link","imgUrl","logoImg","res","console","log","cancel","fail","result","onMenuShareTimeline","fellowSC","mid","is_wxBrowser","jumpToApp","is_shici","localStorage","getItem","user_info","JSON","parse","userId","length","sub","uid","unSubed","unsub","pagedata","userInfo","isSubed","nextProps","nextContext","pathname","sessionStorage","setItem","document","scrollTop","navigator","userAgent","match","setPageHeader","setState","setData","html","pushListUrl","stringify","isSub","fellowCB","unSubCB","bgImg","categoryList","backgroundImage","besubscribed","background","tvChName","liveCategoryControl","map","item","category","sign"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport {Link ,withRouter} from 'react-router-dom';\nimport logo from '../../assets/logo.png';\nimport $ from \"jquery\";\nimport api from \"../../API/api\";\nimport tool from \"../../tool\";\nimport './index.scss';\nclass Recommend extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data:{},\n      pagedata:{},\n      userInfo:{},\n      isSubed:false\n    };\n  }\n  componentWillReceiveProps(nextProps, nextContext) {\n    // console.log(this.props)\n    if ( this.props.location.pathname==='/recommend'||this.props.location.pathname==='/'){\n      window.sessionStorage.setItem('top', 0)\n    }else {\n      window.sessionStorage.setItem('top',$(document).scrollTop())\n    }\n  }\n\n  // componentWillUpdate(nextProps, nextState, nextContext) {\n  //   console.log(window.sessionStorage.getItem('top'));\n  //\n  // }\n  componentWillMount() {\n    if ((navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i))) {\n    }else {\n      /**\n       * PC地址 **/\n      window.location.href=\"http://tv.cctv.com/lm/duihua/?spm=C28340.PSfu2aQvxDti.EYGi0YaFIj8C.264\";\n    }\n    this.getyshInfo();\n    this.getRecommendData();\n    let _this = this;\n    window.setPageHeader=function (resp) {\n      _this.setState({\n        data:resp.data\n      },()=> {\n        _this.shareWx();\n          const {data} = _this.state;\n          // console.log(data);\n\n      })\n    }\n    window.setData=function(resp){\n        $('title').html(resp.data.pushListUrl);\n      _this.setState({\n        pagedata:resp.data\n      },function () {\n        const {pagedata} = this.state;\n        sessionStorage.setItem('firstNav', JSON.stringify(pagedata));\n      })\n    }\n  }\n  componentDidMount() {\n    let _this = this;\n    if (tool.is_shici()){\n      let isSub = sessionStorage.getItem('isSubed');\n      if (isSub / 1){\n        this.setState({\n          isSubed  : 1\n        })\n      } else {\n        this.setState({\n          isSubed  : 0\n        })\n      }\n    }\n    window.fellowCB = function (resp) {\n      // console.log(resp.data)\n      if (resp.data==='OK'){\n        _this.setState({\n          isSubed:true\n        })\n        sessionStorage.setItem('isSubed',1);\n      }else if (resp.data==='Subed') {\n        _this.setState({\n          isSubed:true\n        })\n        sessionStorage.setItem('isSubed',1);\n      }else {\n        window.location.href='login://app.cctv.cn';\n      }\n      \n    }\n    window.unSubCB = function (resp) {\n      if (resp.data==='OK'){\n        _this.setState({\n          isSubed:false\n        })\n\n        sessionStorage.setItem('isSubed',0);\n      }else if (resp.data==='unSub') {\n        _this.setState({\n          isSubed:false\n        })\n        sessionStorage.setItem('isSubed',0);\n\n      }else {\n        window.location.href='login://app.cctv.cn';\n      }\n    }\n\n  }\n  /*wxShare*/\n  shareWx = ()=>{\n    const { data } = this.state;\n    let t ,_this=this;\n    t=setInterval(function () {\n      if (data.mediaName){\n        _this.getConfigInfo(data);\n        clearInterval(t)\n      }else {\n        return false\n      }\n    },500)\n  }\n  /*获取央视号头部*/\n  getyshInfo = ()=>{\n    $.ajax({\n      type:'GET',\n      dataType: \"jsonp\",\n      url:api.pageHeader + 'setPageHeader',\n      data:{},\n    })\n  };\n  /*获取推荐的数据*/\n  getRecommendData=()=>{\n    $.ajax({\n      type:'GET',\n      dataType: \"jsonp\",\n      url:api.recommendList + 'setData',\n      data:{},\n    })\n  };\n  /*获取wxconfig信息*/\n  getConfigInfo = ( data )=>{\n    $.ajax({\n      dataType:\"jsonp\",\n      type:'GET',\n      url:'http://appms.app.cntvwb.cn/appms/wxjs/getsign.do',\n      timeout: 10000,\n      jsonp:'cb',\n      jsonpCallback:'wx_sign_cb',\n      data:{\n        appid : \"wx6736e1ee7f82ba26\",\n        url: window.location.href.split('#')[0],\n        f:\"jsonp\"\n      },\n      success:function success(resp) {\n        window.wx.config({\n          debug: false,\n          appId: \"wx6736e1ee7f82ba26\",\n          timestamp: resp.data.timestamp,\n          nonceStr: resp.data.nonceStr,\n          signature: resp.data.signature,\n          jsApiList: [\n            'checkJsApi',\n            'onMenuShareTimeline',\n            'onMenuShareAppMessage',\n            'onMenuShareQQ',\n            'onMenuShareWeibo'\n          ]\n        });\n        window.wx.ready(function () {\n          window.wx.onMenuShareAppMessage({\n            title : data.mediaName,\n            desc : data.biref,  // 分享描述\n            link: window.location.href,\n            imgUrl:data.logoImg||'',\n            success: function (res) {  // 设置成功\n              console.log('微信分享成功')\n            },\n            cancel: function (res) {\n            },\n            fail: function (result) {\n              console.log(result)\n            }\n          });\n          // “分享到朋友圈”及“分享到QQ空间”  无描述\n          window.wx.onMenuShareTimeline({\n            title : data.mediaName,\n            link: window.location.href,\n            imgUrl:data.logoImg||'',\n            success: function () {\n              // 设置成功\n              console.log('微信分享成功')\n            }\n          });\n\n        });\n      }\n    });\n  };\n  /*点击关注*/\n  fellowSC=()=>{\n    let mid = '17aQfAjy0815';\n    if(tool.is_wxBrowser()){\n      tool.jumpToApp('23', mid);\n    }else if (tool.is_shici()){\n      if (window.localStorage.getItem(\"user_info\")){\n        let user_info = JSON.parse(window.localStorage.getItem('user_info'));\n        if (user_info.userId.length<1){\n          window.location.href='login://app.cctv.cn';\n        }else {\n          // alert('点击了关注按钮');\n          $.ajax({\n            type:'GET',\n            dataType:\"jsonp\",\n            url:api.sub+'&cb=fellowCB',\n            data:{\n              uid:user_info.userId,\n            }\n          });\n        }\n      }else {\n        window.location.href='login://app.cctv.cn';\n      }\n    } else {\n      tool.jumpToApp('23', mid);\n    }\n  };\n  /*取消关注*/\n  unSubed=()=>{\n    let mid = '17aQfAjy0815';\n    if(tool.is_wxBrowser()){\n      tool.jumpToApp('23', mid);\n    }else if (tool.is_shici()){\n      // alert('环境：客户端');\n      if (window.localStorage.getItem(\"user_info\")){\n        let user_info = JSON.parse(window.localStorage.getItem('user_info'));\n        // console.log(user_info);\n        if (user_info.userId.length<1){\n          window.location.href='login://app.cctv.cn';\n          return false\n        }\n        // alert('点击了取消关注');\n        $.ajax({\n          dataType:\"jsonp\",\n          type:'GET',\n          url:api.unsub + '&cb=unSubCB',\n          data:{\n            mid:\"17aQfAjy0815\",\n            uid:user_info.userId,\n          },\n        });\n      }else {\n        window.location.href='login://cctv.cn';\n      }\n    } else {\n      tool.jumpToApp('23', mid);\n    }\n  };\n  render() {\n    const {data,isSubed,pagedata} = this.state;\n    console.log(data.bgImg);\n    let categoryList = pagedata.categoryList ? pagedata.categoryList : [];\n    return (\n      <div className='page-header'>\n        <div className='page-info' style={{backgroundImage:'url('+data.bgImg+')'}}>\n          <h1 className='limit-line1'>{data.mediaName}</h1>\n          <div className='fellow-box'>\n            <p><span>{data.besubscribed}</span> 粉丝</p>\n            {isSubed?\n              <a onClick={this.unSubed} style={{background:'rgba(222,222,222,.3)'}}>已关注</a>\n              :\n              <a onClick={this.fellowSC}>+关注</a>\n            }\n          </div>\n          <h2>{data.biref}</h2>\n          <div className='palywhere'>\n            <p>{data.tvChName}</p>\n            <p>{pagedata.liveCategoryControl}</p>\n          </div>\n          <div className='logobox'>\n            <img src={ data.logoImg || ''} alt=\"logo\"/>\n          </div>\n        </div>\n        <ul className='page-nav'>\n          <li\n            className={this.props.location.pathname==='/recommend'||this.props.location.pathname==='/'?\"on\":\"\"}\n            key='recommend'>\n            <a href='#/recommend'>推荐</a>\n          </li>\n          {categoryList.map(item=>{\n            if (item.category/1===1){\n              return (\n                <li\n                  className={this.props.location.pathname==='/recommend/'+item.sign ?\"on\":\"\"}\n                  key={item.sign}>\n                  <Link to={'#/recommend/'+item.sign}>{item.title}</Link>\n                </li>\n              )\n            }else if(item.category/1===2){\n              return(\n                <li\n                  className={this.props.location.pathname==='/talkingPoetry/'+item.sign?\"on\":\"\"}\n                  key={item.sign}>\n                  <Link to={'/talkingPoetry/'+item.sign}>{item.title}</Link>\n                </li>\n              )\n            }else if(item.category/1===3){\n              return(\n                <li\n                  className={this.props.location.pathname==='/lookPoetry/'+item.sign?\"on\":\"\"}\n                  key={item.sign}>\n                  <Link to={'/lookPoetry/'+item.sign}>{item.title}</Link>\n                </li>\n              )\n            }else if(item.category/1===4){\n              return(\n                <li\n                  className={this.props.location.pathname==='/lookPoetry2/'+item.sign?\"on\":\"\"}\n                  key={item.sign}>\n                  <Link to={'/lookPoetry2/'+item.sign}>{item.title}</Link>\n                </li>\n              )\n            }else if(item.category/1===5){\n              return(\n                <li\n                  className={this.props.location.pathname==='/PopularityList/'+item.sign?\"on\":\"\"}\n                  key={item.sign}>\n                  <Link to={'/PopularityList/'+item.sign}>{item.title}</Link>\n                </li>\n              )\n            }\n          })}\n        </ul>\n      </div>\n    )\n  }\n}\nexport default withRouter(Recommend)"]},"metadata":{},"sourceType":"module"}