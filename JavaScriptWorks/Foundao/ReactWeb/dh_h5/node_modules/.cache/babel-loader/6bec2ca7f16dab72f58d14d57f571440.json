{"ast":null,"code":"import _classCallCheck from \"/Users/HeroMeiKong/JobSpace/JavaScriptWorks/foundao/ReactWeb/dh_h5/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/HeroMeiKong/JobSpace/JavaScriptWorks/foundao/ReactWeb/dh_h5/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/HeroMeiKong/JobSpace/JavaScriptWorks/foundao/ReactWeb/dh_h5/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/HeroMeiKong/JobSpace/JavaScriptWorks/foundao/ReactWeb/dh_h5/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/HeroMeiKong/JobSpace/JavaScriptWorks/foundao/ReactWeb/dh_h5/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/HeroMeiKong/JobSpace/JavaScriptWorks/foundao/ReactWeb/dh_h5/src/components/Recommend/wholePeriod/index.js\";\nimport React, { Component } from 'react';\nimport $ from 'jquery';\nimport { withRouter } from \"react-router-dom\";\nimport './index.scss';\n\nvar WholePeriod =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(WholePeriod, _Component);\n\n  function WholePeriod(props) {\n    var _this2;\n\n    _classCallCheck(this, WholePeriod);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(WholePeriod).call(this, props));\n\n    _this2.getWhole = function () {\n      var data = _this2.state.data;\n\n      if (!data) {\n        return;\n      }\n\n      var wholeUrl = data.templateUrl;\n      $.ajax({\n        url: 'http://m.app.cctv.com/json/jsonp?url=' + wholeUrl + '&cb=wholeData' + data.order,\n        dataType: 'jsonp',\n        type: 'GET'\n      });\n    };\n\n    _this2.changeLink = function (data) {\n      var firstNav;\n\n      if (sessionStorage.firstNav) {\n        firstNav = JSON.parse(sessionStorage.firstNav);\n      } else {\n        _this2.props.history.push('/');\n\n        return false;\n      }\n\n      var PageLink = '/';\n      var firstNavList = firstNav.categoryList;\n      var dataSign = data.categorySign,\n          categoryCid = data.categoryCid;\n\n      for (var i in firstNavList) {\n        if (dataSign === firstNavList[i].sign) {\n          // console.log(firstNavList[i])\n          var category = firstNavList[i].category;\n\n          if (category / 1 === 1) {\n            PageLink = '/';\n          } else if (category / 1 === 2) {\n            PageLink = '/talkingPoetry/' + dataSign + '?type=' + categoryCid;\n          } else if (category / 1 === 3) {\n            PageLink = '/lookPoetry/' + dataSign + '?type=' + categoryCid;\n          } else if (category / 1 === 4) {\n            PageLink = '/lookPoetry2/' + dataSign + '?type=' + categoryCid;\n          } else if (category / 1 === 5) {\n            PageLink = '/PopularityList/' + dataSign;\n          }\n\n          break;\n        }\n      } // console.log(data)\n      // console.log(this.props.history)\n\n\n      _this2.props.history.push(PageLink);\n    };\n\n    _this2.state = {\n      data: {},\n      //推荐页所有数据\n      wholeAll: {},\n      wholeData: []\n    };\n    return _this2;\n  }\n\n  _createClass(WholePeriod, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var data = this.props.data;\n      this.setState({\n        data: data\n      }, function () {\n        this.getWhole();\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var data = this.props.data;\n\n      if (!data) {\n        return;\n      }\n\n      var _this = this;\n\n      window['wholeData' + data.order] = function (resp) {\n        var wholeData = [];\n\n        for (var i in resp.data.itemList) {\n          if (resp.data.itemList[i].isShow === '0') {\n            return false;\n          } else {\n            wholeData.push(resp.data.itemList[i]);\n          }\n        }\n\n        _this.setState({\n          wholeAll: resp.data,\n          wholeData: wholeData\n        });\n      };\n    }\n    /*获取数据*/\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          data = _this$state.data,\n          wholeData = _this$state.wholeData; // console.log(data)\n\n      return React.createElement(\"div\", {\n        className: \"recommend-wholePeriod-box\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, data.title, data.categoryControl === '1' ? React.createElement(\"a\", {\n        onClick: this.changeLink.bind(this, data),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, \"more\") : \"\"), React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, wholeData.map(function (item, index) {\n        // console.log(item)\n        return React.createElement(\"li\", {\n          key: index,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 106\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 107\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          src: item.imgUrl,\n          alt: \"\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108\n          },\n          __self: this\n        }), item.video_length ? React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110\n          },\n          __self: this\n        }, item.video_length) : \"\"), React.createElement(\"h3\", {\n          className: \"limit-line2\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114\n          },\n          __self: this\n        }, item.title), item.vtype / 1 === 1 ? React.createElement(\"a\", {\n          href: \"http://app.cctv.com/special/cbox/detail/index.html?guid=\" + item.vid + \"&mid=17aQfAjy0815&vsid=\" + item.vsetId,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 116\n          },\n          __self: this\n        }) : item.vtype / 1 === 3 ? React.createElement(\"a\", {\n          href: \"http://app.cctv.com/special/cbox/detail/index.html?guid=\" + item.vid + \"&mid=17aQfAjy0815&vsid=\" + item.vsetId,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 119\n          },\n          __self: this\n        }) : item.vtype / 1 === 7 ? React.createElement(\"a\", {\n          href: item.pcUrl,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 122\n          },\n          __self: this\n        }) : item.vtype / 1 === 8 ? React.createElement(\"a\", {\n          href: \"http://app.cctv.com/special/cbox/newlive/index.html?channel=\" + item.channelId,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125\n          },\n          __self: this\n        }) : item.vtype / 1 === 23 ? React.createElement(\"a\", {\n          href: \"http://cbox.cntv.cn/special/cbox/fastvideo/index.html?id=\" + item.vsetPageid + \"&guid=\" + item.vid + \"vtype=47\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128\n          },\n          __self: this\n        }) : \"\");\n      })));\n    }\n  }]);\n\n  return WholePeriod;\n}(Component);\n\nexport default withRouter(WholePeriod);","map":{"version":3,"sources":["/Users/HeroMeiKong/JobSpace/JavaScriptWorks/foundao/ReactWeb/dh_h5/src/components/Recommend/wholePeriod/index.js"],"names":["React","Component","$","withRouter","WholePeriod","props","getWhole","data","state","wholeUrl","templateUrl","ajax","url","order","dataType","type","changeLink","firstNav","sessionStorage","JSON","parse","history","push","PageLink","firstNavList","categoryList","dataSign","categorySign","categoryCid","i","sign","category","wholeAll","wholeData","setState","_this","window","resp","itemList","isShow","title","categoryControl","bind","map","item","index","imgUrl","video_length","vtype","vid","vsetId","pcUrl","channelId","vsetPageid"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport $ from 'jquery';\nimport {withRouter} from \"react-router-dom\";\nimport './index.scss'\nclass WholePeriod extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data:{},//推荐页所有数据\n      wholeAll:{},\n      wholeData:[]\n    };\n  }\n\n  componentWillMount() {\n    const {data} = this.props;\n    this.setState({\n      data\n    },function () {\n      this.getWhole();\n    });\n  }\n  componentDidMount() {\n    const {data}=this.props;\n    if(!data){\n      return\n    }\n    let _this = this;\n    window['wholeData'+data.order]=function (resp) {\n      let wholeData=[];\n      for (let i in resp.data.itemList){\n        if(resp.data.itemList[i].isShow==='0'){\n          return false\n        }else {\n          wholeData.push(resp.data.itemList[i])\n        }\n      }\n      _this.setState({\n        wholeAll:resp.data,\n        wholeData:wholeData\n      })\n    }\n  }\n\n  /*获取数据*/\n  getWhole=()=>{\n    const {data}=this.state;\n    if(!data){\n      return\n    }\n    let wholeUrl = data.templateUrl;\n    $.ajax({\n      url:'http://m.app.cctv.com/json/jsonp?url='+wholeUrl+'&cb=wholeData'+data.order,\n      dataType:'jsonp',\n      type:'GET'\n    })\n  };\n\n  /*切换路由*/\n  changeLink=(data)=>{\n    let firstNav;\n    if(sessionStorage.firstNav){\n      firstNav=JSON.parse(sessionStorage.firstNav);\n    }else {\n      this.props.history.push('/');\n      return false\n    }\n    let PageLink ='/';\n    let firstNavList = firstNav.categoryList;\n    let dataSign = data.categorySign ,categoryCid = data.categoryCid;\n    for (let i in firstNavList){\n      if (dataSign===firstNavList[i].sign){\n        // console.log(firstNavList[i])\n        let category = firstNavList[i].category;\n        if (category/1===1){\n          PageLink='/'\n        }  else if (category/1===2){\n          PageLink='/talkingPoetry/'+dataSign+'?type='+categoryCid\n        }  else if (category/1===3){\n          PageLink='/lookPoetry/'+dataSign+'?type='+categoryCid\n        }  else if (category/1===4){\n          PageLink='/lookPoetry2/'+dataSign+'?type='+categoryCid\n        }  else if (category/1===5){\n          PageLink='/PopularityList/'+dataSign\n        }\n        break;\n      }\n    }\n    // console.log(data)\n    // console.log(this.props.history)\n    this.props.history.push(PageLink);\n  };\n  render() {\n    const {data , wholeData} = this.state;\n    // console.log(data)\n    return (\n      <div className='recommend-wholePeriod-box'>\n        <h2>{data.title}\n          {data.categoryControl==='1'?\n            <a onClick={this.changeLink.bind(this,data)}>more</a>\n            :\"\"}\n        </h2>\n        <ul>\n          {wholeData.map((item,index)=>{\n            // console.log(item)\n            return <li key={index}>\n              <div>\n                <img src={item.imgUrl} alt=\"\"/>\n                {item.video_length?\n                <p>{item.video_length}</p>\n                  :\"\"\n                }\n              </div>\n              <h3 className='limit-line2'>{item.title}</h3>\n              {item.vtype/1===1 ?\n                <a href={\"http://app.cctv.com/special/cbox/detail/index.html?guid=\"+item.vid+\"&mid=17aQfAjy0815&vsid=\"+item.vsetId}></a>\n                :\n                item.vtype/1===3 ?\n                  <a href={\"http://app.cctv.com/special/cbox/detail/index.html?guid=\"+item.vid+\"&mid=17aQfAjy0815&vsid=\"+item.vsetId}></a>\n                  :\n                  item.vtype/1===7 ?\n                    <a href={item.pcUrl}></a>\n                    :\n                    item.vtype/1===8 ?\n                      <a href={\"http://app.cctv.com/special/cbox/newlive/index.html?channel=\"+item.channelId}></a>\n                      :\n                      item.vtype/1===23 ?\n                        <a href={\"http://cbox.cntv.cn/special/cbox/fastvideo/index.html?id=\"+item.vsetPageid+\"&guid=\"+item.vid+\"vtype=47\"}></a>\n                        :\n                        \"\"\n              }\n              {/*<a href={\"http://app.cctv.com/special/cbox/detail/index.html?guid=\"+item.vid+\"&mid=18NJVZji0319&vsid=\"+item.vsetId}></a>*/}\n            </li>\n          })\n          }\n        </ul>\n      </div>\n    )\n  }\n}\n\nexport default withRouter(WholePeriod)"]},"metadata":{},"sourceType":"module"}