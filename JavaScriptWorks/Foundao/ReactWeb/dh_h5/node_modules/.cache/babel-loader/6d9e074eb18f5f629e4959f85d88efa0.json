{"ast":null,"code":"import _classCallCheck from \"/Users/HeroMeiKong/JobSpace/JavaScriptWorks/foundao/ReactWeb/dh_h5/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/HeroMeiKong/JobSpace/JavaScriptWorks/foundao/ReactWeb/dh_h5/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/HeroMeiKong/JobSpace/JavaScriptWorks/foundao/ReactWeb/dh_h5/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/HeroMeiKong/JobSpace/JavaScriptWorks/foundao/ReactWeb/dh_h5/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/HeroMeiKong/JobSpace/JavaScriptWorks/foundao/ReactWeb/dh_h5/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/HeroMeiKong/JobSpace/JavaScriptWorks/foundao/ReactWeb/dh_h5/src/components/Recommend/FeiHuaLing/index.js\";\nimport React, { Component } from 'react';\nimport $ from 'jquery';\nimport { withRouter } from \"react-router-dom\";\nimport './index.scss';\n\nvar FeiHuaLing =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(FeiHuaLing, _Component);\n\n  function FeiHuaLing(props) {\n    var _this2;\n\n    _classCallCheck(this, FeiHuaLing);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(FeiHuaLing).call(this, props));\n\n    _this2.getFHL = function () {\n      var data = _this2.state.data;\n\n      if (!data) {\n        return;\n      }\n\n      var fhlUrl = data.templateUrl;\n      $.ajax({\n        url: 'http://m.app.cctv.com/json/jsonp?url=' + fhlUrl + '&cb=feihuaData' + data.order,\n        dataType: 'jsonp',\n        type: 'GET'\n      });\n    };\n\n    _this2.changeLink = function (data) {\n      var firstNav;\n\n      if (sessionStorage.firstNav) {\n        firstNav = JSON.parse(sessionStorage.firstNav);\n      } else {\n        _this2.props.history.push('/');\n\n        return false;\n      }\n\n      var PageLink = '/';\n      var firstNavList = firstNav.categoryList;\n      var dataSign = data.categorySign,\n          categoryCid = data.categoryCid;\n\n      for (var i in firstNavList) {\n        if (dataSign === firstNavList[i].sign) {\n          // console.log(firstNavList[i])\n          var category = firstNavList[i].category;\n\n          if (category / 1 === 1) {\n            PageLink = '/';\n          } else if (category / 1 === 2) {\n            PageLink = '/talkingPoetry/' + dataSign + '?type=' + categoryCid;\n          } else if (category / 1 === 3) {\n            PageLink = '/lookPoetry/' + dataSign + '?type=' + categoryCid;\n          } else if (category / 1 === 4) {\n            PageLink = '/lookPoetry2/' + dataSign + '?type=' + categoryCid;\n          } else if (category / 1 === 5) {\n            PageLink = '/PopularityList/' + dataSign;\n          }\n\n          break;\n        }\n      } // console.log(data)\n      // console.log(this.props.history)\n\n\n      _this2.props.history.push(PageLink);\n    };\n\n    _this2.state = {\n      data: {},\n      //推荐页所有数据\n      feihuaAll: {},\n      feihuaData: []\n    };\n    return _this2;\n  }\n\n  _createClass(FeiHuaLing, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var data = this.props.data;\n      this.setState({\n        data: data\n      }, function () {\n        this.getFHL();\n      }); // console.log(data)\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this = this;\n\n      var data = this.props.data;\n\n      if (!data) {\n        return false;\n      }\n\n      window['feihuaData' + data.order] = function (resp) {\n        // console.log(resp)\n        var feihuaData = [];\n\n        for (var i in resp.data.itemList) {\n          if (resp.data.itemList[i].isShow === '0') {\n            return false;\n          } else {\n            feihuaData.push(resp.data.itemList[i]);\n          }\n        }\n\n        _this.setState({\n          feihuaAll: resp.data,\n          feihuaData: feihuaData\n        });\n      };\n    }\n    /*获取数据*/\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          data = _this$state.data,\n          feihuaData = _this$state.feihuaData;\n      return React.createElement(\"div\", {\n        className: \"recommend-FeiHuaLing-box\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, data.title, data.categoryControl === '1' ? React.createElement(\"a\", {\n        onClick: this.changeLink.bind(this, data),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, \"more\") : \"\"), React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, feihuaData.map(function (item, index) {\n        if (index < 12) {\n          return React.createElement(\"li\", {\n            key: 'feihua' + index,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 109\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 110\n            },\n            __self: this\n          }, React.createElement(\"img\", {\n            src: item.imgUrl,\n            alt: item.title,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 111\n            },\n            __self: this\n          }), item.video_length ? React.createElement(\"p\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 113\n            },\n            __self: this\n          }, item.video_length) : \"\"), React.createElement(\"h3\", {\n            className: \"limit-line2\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 117\n            },\n            __self: this\n          }, item.title), item.vtype / 1 === 1 ? React.createElement(\"a\", {\n            href: \"http://app.cctv.com/special/cbox/detail/index.html?guid=\" + item.vid + \"&mid=17aQfAjy0815&vsid=\" + item.vsetId,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 120\n            },\n            __self: this\n          }) : item.vtype / 1 === 3 ? React.createElement(\"a\", {\n            href: \"http://app.cctv.com/special/cbox/detail/index.html?guid=\" + item.vid + \"&mid=17aQfAjy0815&vsid=\" + item.vsetId,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 123\n            },\n            __self: this\n          }) : item.vtype / 1 === 7 ? React.createElement(\"a\", {\n            href: item.pcUrl,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 126\n            },\n            __self: this\n          }) : item.vtype / 1 === 8 ? React.createElement(\"a\", {\n            href: \"http://app.cctv.com/special/cbox/newlive/index.html?channel=\" + item.channelId,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 129\n            },\n            __self: this\n          }) : item.vtype / 1 === 23 ? React.createElement(\"a\", {\n            href: \"http://cbox.cntv.cn/special/cbox/fastvideo/index.html?id=\" + item.vsetPageid + \"&guid=\" + item.vid + \"vtype=47\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 132\n            },\n            __self: this\n          }) : \"\");\n        } else {\n          return false;\n        }\n      })));\n    }\n  }]);\n\n  return FeiHuaLing;\n}(Component);\n\nexport default withRouter(FeiHuaLing);","map":{"version":3,"sources":["/Users/HeroMeiKong/JobSpace/JavaScriptWorks/foundao/ReactWeb/dh_h5/src/components/Recommend/FeiHuaLing/index.js"],"names":["React","Component","$","withRouter","FeiHuaLing","props","getFHL","data","state","fhlUrl","templateUrl","ajax","url","order","dataType","type","changeLink","firstNav","sessionStorage","JSON","parse","history","push","PageLink","firstNavList","categoryList","dataSign","categorySign","categoryCid","i","sign","category","feihuaAll","feihuaData","setState","_this","window","resp","itemList","isShow","title","categoryControl","bind","map","item","index","imgUrl","video_length","vtype","vid","vsetId","pcUrl","channelId","vsetPageid"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport $ from 'jquery';\nimport {withRouter} from \"react-router-dom\";\n\nimport './index.scss'\nclass FeiHuaLing extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data:{},//推荐页所有数据\n      feihuaAll:{},\n      feihuaData:[]\n    };\n  }\n\n  componentWillMount() {\n    const {data} = this.props;\n    this.setState({\n      data\n    },function () {\n      this.getFHL();\n    });\n    // console.log(data)\n  }\n\n  componentDidMount() {\n    let _this = this;\n    const {data} = this.props;\n    if (!data){\n      return false\n    }\n    window['feihuaData'+data.order]=function (resp) {\n      // console.log(resp)\n      let feihuaData=[];\n      for (let i in resp.data.itemList){\n        if(resp.data.itemList[i].isShow==='0'){\n          return false\n        }else {\n          feihuaData.push(resp.data.itemList[i])\n        }\n      }\n      _this.setState({\n        feihuaAll:resp.data,\n        feihuaData:feihuaData\n      })\n    }\n  }\n\n  /*获取数据*/\n  getFHL=()=>{\n    const {data}=this.state;\n    if(!data){\n      return\n    }\n    let fhlUrl = data.templateUrl;\n    $.ajax({\n      url:'http://m.app.cctv.com/json/jsonp?url='+fhlUrl+'&cb=feihuaData'+data.order,\n      dataType:'jsonp',\n      type:'GET'\n    })\n  };\n\n  /*切换路由*/\n  changeLink=(data)=>{\n    let firstNav;\n    if(sessionStorage.firstNav){\n      firstNav=JSON.parse(sessionStorage.firstNav);\n    }else {\n      this.props.history.push('/');\n      return false\n    }\n    let PageLink ='/';\n    let firstNavList = firstNav.categoryList;\n    let dataSign = data.categorySign ,categoryCid = data.categoryCid;\n    for (let i in firstNavList){\n      if (dataSign===firstNavList[i].sign){\n        // console.log(firstNavList[i])\n        let category = firstNavList[i].category;\n        if (category/1===1){\n          PageLink='/'\n        }  else if (category/1===2){\n          PageLink='/talkingPoetry/'+dataSign+'?type='+categoryCid\n        }  else if (category/1===3){\n          PageLink='/lookPoetry/'+dataSign+'?type='+categoryCid\n        }  else if (category/1===4){\n          PageLink='/lookPoetry2/'+dataSign+'?type='+categoryCid\n        }  else if (category/1===5){\n          PageLink='/PopularityList/'+dataSign\n        }\n        break;\n      }\n    }\n    // console.log(data)\n    // console.log(this.props.history)\n    this.props.history.push(PageLink);\n  };\n  render() {\n    const {data , feihuaData} = this.state;\n    return (\n      <div className='recommend-FeiHuaLing-box'>\n        <h2>{data.title}\n          {data.categoryControl==='1'?\n            <a onClick={this.changeLink.bind(this,data)}>more</a>\n            :\"\"}\n        </h2>\n        <ul>\n          {feihuaData.map((item,index)=>{\n            if(index<12){\n              return <li key={'feihua'+index}>\n                <div>\n                  <img src={item.imgUrl} alt={item.title}/>\n                  {item.video_length?\n                    <p>{item.video_length}</p>\n                    :\"\"\n                  }\n                </div>\n                <h3 className='limit-line2'>{item.title}</h3>\n                {/*<p className='feihua-brief'>{item.brief}</p>*/}\n                {item.vtype/1===1 ?\n                  <a href={\"http://app.cctv.com/special/cbox/detail/index.html?guid=\"+item.vid+\"&mid=17aQfAjy0815&vsid=\"+item.vsetId}></a>\n                  :\n                  item.vtype/1===3 ?\n                    <a href={\"http://app.cctv.com/special/cbox/detail/index.html?guid=\"+item.vid+\"&mid=17aQfAjy0815&vsid=\"+item.vsetId}></a>\n                    :\n                    item.vtype/1===7 ?\n                      <a href={item.pcUrl}></a>\n                      :\n                      item.vtype/1===8 ?\n                        <a href={\"http://app.cctv.com/special/cbox/newlive/index.html?channel=\"+item.channelId}></a>\n                        :\n                        item.vtype/1===23 ?\n                          <a href={\"http://cbox.cntv.cn/special/cbox/fastvideo/index.html?id=\"+item.vsetPageid+\"&guid=\"+item.vid+\"vtype=47\"}></a>\n                          :\n                          \"\"\n                }\n                {/*<a href={\"http://app.cctv.com/special/cbox/detail/index.html?guid=\"+item.vid+\"&mid=18NJVZji0319&vsid=\"+item.vsetId}></a>*/}\n              </li>\n            }else {\n                return false\n            }\n          })}\n        </ul>\n      </div>\n    )\n  }\n}\nexport default withRouter(FeiHuaLing)"]},"metadata":{},"sourceType":"module"}