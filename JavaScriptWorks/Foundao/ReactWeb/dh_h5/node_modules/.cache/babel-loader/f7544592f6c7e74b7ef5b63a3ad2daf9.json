{"ast":null,"code":"import _classCallCheck from \"/Users/HeroMeiKong/JobSpace/JavaScriptWorks/foundao/ReactWeb/dh_h5/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/HeroMeiKong/JobSpace/JavaScriptWorks/foundao/ReactWeb/dh_h5/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/HeroMeiKong/JobSpace/JavaScriptWorks/foundao/ReactWeb/dh_h5/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/HeroMeiKong/JobSpace/JavaScriptWorks/foundao/ReactWeb/dh_h5/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/HeroMeiKong/JobSpace/JavaScriptWorks/foundao/ReactWeb/dh_h5/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/HeroMeiKong/JobSpace/JavaScriptWorks/foundao/ReactWeb/dh_h5/src/components/PopularityList/index.js\";\nimport React, { Component } from 'react';\nimport './index.scss';\nimport tool from '../../tool';\n\nvar PopularityList =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(PopularityList, _Component);\n\n  function PopularityList(props) {\n    var _this;\n\n    _classCallCheck(this, PopularityList);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(PopularityList).call(this, props));\n    _this.state = {\n      data: {},\n      //推荐页所有数据\n      dataLink: '',\n      isiOS: false\n    };\n    return _this;\n  }\n\n  _createClass(PopularityList, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      // let pagelink = window.location.href;\n      // let dataLink = pagelink.slice(pagelink.lastIndexOf('?')+5);\n      // console.log(dataLink);\n      if (tool.is_iOS()) {\n        this.setState({\n          isiOS: true\n        });\n      } else {\n        this.setState({\n          isiOS: false\n        });\n      }\n\n      var dataUrl = '';\n      var firstNav;\n\n      if (sessionStorage.firstNav) {\n        firstNav = JSON.parse(sessionStorage.firstNav);\n      } else {\n        this.props.history.push('/');\n        return false;\n      }\n\n      var firstNavList = firstNav.categoryList;\n      var pageUrl = this.props.match.params.name;\n\n      for (var i in firstNavList) {\n        if (pageUrl === firstNavList[i].sign) {\n          dataUrl = firstNavList[i].listUrl;\n        }\n      }\n\n      this.setState({\n        dataLink: dataUrl\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {// let ifm = window.jQuery('iframe').get(0);\n      // if (!ifm){\n      //   return\n      // }\n      // let iframeWin = ifm.contentWindow\n      // console.log(ifm.contentWindow.document.documentElement)\n      // if (iframeWin.document.body) {\n      //   ifm.height = iframeWin.document.documentElement.scrollHeight || iframeWin.document.body.scrollHeight;\n      // }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          isiOS = _this$state.isiOS,\n          dataLink = _this$state.dataLink;\n      return React.createElement(\"div\", {\n        className: isiOS ? \"popularity-box iosbox\" : \"popularity-box androidbox\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, React.createElement(\"iframe\", {\n        src: dataLink,\n        frameBorder: \"0\",\n        height: \"100%\",\n        scrolling: \"yes\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return PopularityList;\n}(Component);\n\nexport { PopularityList as default };","map":{"version":3,"sources":["/Users/HeroMeiKong/JobSpace/JavaScriptWorks/foundao/ReactWeb/dh_h5/src/components/PopularityList/index.js"],"names":["React","Component","tool","PopularityList","props","state","data","dataLink","isiOS","is_iOS","setState","dataUrl","firstNav","sessionStorage","JSON","parse","history","push","firstNavList","categoryList","pageUrl","match","params","name","i","sign","listUrl"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAO,cAAP;AACA,OAAOC,IAAP,MAAiB,YAAjB;;IACqBC,c;;;;;AACnB,0BAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,wFAAMA,KAAN;AACA,UAAKC,KAAL,GAAa;AACXC,MAAAA,IAAI,EAAC,EADM;AACH;AACRC,MAAAA,QAAQ,EAAC,EAFE;AAGXC,MAAAA,KAAK,EAAC;AAHK,KAAb;AAFiB;AAOlB;;;;yCACoB;AACnB;AACA;AACA;AACA,UAAIN,IAAI,CAACO,MAAL,EAAJ,EAAkB;AAChB,aAAKC,QAAL,CAAc;AACZF,UAAAA,KAAK,EAAC;AADM,SAAd;AAGD,OAJD,MAIO;AACL,aAAKE,QAAL,CAAc;AACZF,UAAAA,KAAK,EAAC;AADM,SAAd;AAGD;;AAGD,UAAIG,OAAO,GAAE,EAAb;AACA,UAAIC,QAAJ;;AACA,UAAGC,cAAc,CAACD,QAAlB,EAA2B;AACzBA,QAAAA,QAAQ,GAACE,IAAI,CAACC,KAAL,CAAWF,cAAc,CAACD,QAA1B,CAAT;AACD,OAFD,MAEM;AACJ,aAAKR,KAAL,CAAWY,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB;AACA,eAAO,KAAP;AACD;;AACD,UAAIC,YAAY,GAAGN,QAAQ,CAACO,YAA5B;AACA,UAAIC,OAAO,GAAG,KAAKhB,KAAL,CAAWiB,KAAX,CAAiBC,MAAjB,CAAwBC,IAAtC;;AACA,WAAK,IAAIC,CAAT,IAAcN,YAAd,EAA2B;AACzB,YAAIE,OAAO,KAAKF,YAAY,CAACM,CAAD,CAAZ,CAAgBC,IAAhC,EAAqC;AACnCd,UAAAA,OAAO,GAACO,YAAY,CAACM,CAAD,CAAZ,CAAgBE,OAAxB;AACD;AACF;;AACD,WAAKhB,QAAL,CAAc;AACZH,QAAAA,QAAQ,EAACI;AADG,OAAd;AAGD;;;wCAEmB,CAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACD;;;6BAGQ;AAAA,wBACkB,KAAKN,KADvB;AAAA,UACAG,KADA,eACAA,KADA;AAAA,UACMD,QADN,eACMA,QADN;AAEP,aACE;AAAK,QAAA,SAAS,EAAGC,KAAK,GAAG,uBAAH,GAA2B,2BAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAQ,QAAA,GAAG,EAAED,QAAb;AAAuB,QAAA,WAAW,EAAC,GAAnC;AAAuC,QAAA,MAAM,EAAC,MAA9C;AAAqD,QAAA,SAAS,EAAC,KAA/D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CADF;AAKD;;;;EAhEyCN,S;;SAAvBE,c","sourcesContent":["import React, {Component} from 'react';\nimport './index.scss';\nimport tool from '../../tool';\nexport default class PopularityList extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data:{},//推荐页所有数据\n      dataLink:'',\n      isiOS:false,\n    };\n  }\n  componentWillMount() {\n    // let pagelink = window.location.href;\n    // let dataLink = pagelink.slice(pagelink.lastIndexOf('?')+5);\n    // console.log(dataLink);\n    if (tool.is_iOS()){\n      this.setState({\n        isiOS:true\n      })\n    } else {\n      this.setState({\n        isiOS:false\n      })\n    }\n\n\n    let dataUrl ='';\n    let firstNav;\n    if(sessionStorage.firstNav){\n      firstNav=JSON.parse(sessionStorage.firstNav);\n    }else {\n      this.props.history.push('/');\n      return false\n    }\n    let firstNavList = firstNav.categoryList;\n    let pageUrl = this.props.match.params.name;\n    for (let i in firstNavList){\n      if (pageUrl === firstNavList[i].sign){\n        dataUrl=firstNavList[i].listUrl\n      }\n    }\n    this.setState({\n      dataLink:dataUrl\n    })\n  }\n\n  componentDidMount() {\n    // let ifm = window.jQuery('iframe').get(0);\n    // if (!ifm){\n    //   return\n    // }\n    // let iframeWin = ifm.contentWindow\n    // console.log(ifm.contentWindow.document.documentElement)\n    // if (iframeWin.document.body) {\n    //   ifm.height = iframeWin.document.documentElement.scrollHeight || iframeWin.document.body.scrollHeight;\n    // }\n  }\n\n\n  render() {\n    const {isiOS,dataLink} = this.state;\n    return (\n      <div className={ isiOS ? \"popularity-box iosbox\":\"popularity-box androidbox\"}>\n          <iframe src={dataLink} frameBorder=\"0\" height='100%' scrolling=\"yes\"></iframe>\n      </div>\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}