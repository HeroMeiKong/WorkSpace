{"ast":null,"code":"import _classCallCheck from \"/Users/HeroMeiKong/JobSpace/JavaScriptWorks/foundao/ReactWeb/dh_h5/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/HeroMeiKong/JobSpace/JavaScriptWorks/foundao/ReactWeb/dh_h5/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/HeroMeiKong/JobSpace/JavaScriptWorks/foundao/ReactWeb/dh_h5/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/HeroMeiKong/JobSpace/JavaScriptWorks/foundao/ReactWeb/dh_h5/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/HeroMeiKong/JobSpace/JavaScriptWorks/foundao/ReactWeb/dh_h5/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/HeroMeiKong/JobSpace/JavaScriptWorks/foundao/ReactWeb/dh_h5/src/components/LookPoetry/index.js\";\nimport React, { Component } from 'react';\nimport $ from 'jquery';\nimport './index.scss';\nimport ListStyleOne from '../ListStyleOne/index';\nimport ListStyleSnd from '../ListStyleSnd/index';\n\nvar LookPoetry =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(LookPoetry, _Component);\n\n  function LookPoetry(props) {\n    var _this2;\n\n    _classCallCheck(this, LookPoetry);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(LookPoetry).call(this, props));\n\n    _this2.getParameter = function (url) {\n      var dataUrl = '';\n      var firstNav;\n\n      if (sessionStorage.firstNav) {\n        firstNav = JSON.parse(sessionStorage.firstNav);\n      } else {\n        _this2.props.history.push('/');\n\n        return false;\n      }\n\n      var firstNavList = firstNav.categoryList;\n      var pageUrl = url;\n\n      for (var i in firstNavList) {\n        if (pageUrl === firstNavList[i].sign) {\n          dataUrl = firstNavList[i].listUrl;\n        }\n      } // console.log(dataUrl)\n\n\n      var pagelink = window.location.href;\n      var sign = '';\n\n      if (pagelink.indexOf('?type=') === -1) {\n        sign = '';\n      } else {\n        sign = pagelink.slice(pagelink.lastIndexOf('?type=') + 6);\n      }\n\n      _this2.setState({\n        dataUrl: dataUrl,\n        sign: sign\n      }, function () {\n        this.getData();\n      });\n    };\n\n    _this2.getData = function () {\n      var dataUrl = _this2.state.dataUrl;\n      $.ajax({\n        type: 'GET',\n        dataType: \"jsonp\",\n        url: 'http://m.app.cctv.com/json/jsonp?url=' + dataUrl + '&cb=getTalkData',\n        data: {}\n      });\n    };\n\n    _this2.getCurrType = function () {\n      var _this2$state = _this2.state,\n          sign = _this2$state.sign,\n          LookList = _this2$state.LookList; // console.log(sign,'sign');\n      // console.log(LookList,'LookList')\n\n      if (!sign) {\n        _this2.setState({\n          categoryType: LookList[0].category\n        });\n      } else {\n        for (var i in LookList) {\n          if (sign === LookList[i].sign) {\n            if (LookList[i].category / 1 === 2) {\n              _this2.setState({\n                categoryType: 2\n              });\n            } else {\n              _this2.setState({\n                categoryType: 1\n              });\n            }\n          }\n        }\n      }\n    };\n\n    _this2.getListData = function () {\n      var _this2$state2 = _this2.state,\n          sign = _this2$state2.sign,\n          url = _this2$state2.url,\n          LookList = _this2$state2.LookList;\n      url = LookList[0].listUrl;\n\n      if (sign.length > 0) {\n        for (var i in LookList) {\n          if (sign === LookList[i].sign) {\n            url = LookList[i].listUrl;\n            break;\n          }\n        }\n      } else {\n        url = LookList[0].listUrl;\n      }\n\n      $.ajax({\n        url: 'http://m.app.cctv.com/json/jsonp?url=' + url + '&cb=LookList',\n        dataType: 'jsonp',\n        type: 'GET'\n      });\n    };\n\n    _this2.changeSee = function (item) {\n      var pagelink = _this2.props.match.url;\n\n      _this2.props.history.push(pagelink + '?type=' + item.sign);\n    };\n\n    _this2.state = {\n      data: {},\n      //推荐页所有数据\n      LookList: [],\n      categoryType: 1 //页面样式\n\n    };\n    return _this2;\n  }\n\n  _createClass(LookPoetry, [{\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps, nextContext) {\n      this.getParameter(nextProps.match.params.name);\n      this.setState({\n        // sign:'',\n        ListData: [] // url:''\n\n      });\n    }\n    /*获取数据接口*/\n\n  }, {\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.getParameter(this.props.match.params.name);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState, snapshot) {\n      var tp = window.sessionStorage.getItem('top');\n      $(document).scrollTop(tp);\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this = this;\n\n      window.getTalkData = function (resp) {\n        _this.setState({\n          talkall: resp.data,\n          LookList: resp.data.categoryList || []\n        }, function () {\n          _this.getListData();\n\n          _this.getCurrType();\n        });\n      };\n\n      window.LookList = function (resp) {\n        // console.log(resp)\n        _this.setState({\n          ListData: resp.data.itemList || []\n        });\n      };\n    }\n    /*获取页面数据*/\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$state = this.state,\n          LookList = _this$state.LookList,\n          ListData = _this$state.ListData,\n          categoryType = _this$state.categoryType,\n          sign = _this$state.sign; // console.log(categoryType)\n\n      return React.createElement(\"div\", {\n        className: \"lookStyle_1-box\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        className: \"lookNav\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, LookList.map(function (item, index) {\n        return React.createElement(\"li\", {\n          className: sign === '' && index === 0 ? \"active\" : sign === item.sign ? 'active' : '',\n          onClick: _this3.changeSee.bind(_this3, item),\n          key: 'look' + index,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 155\n          },\n          __self: this\n        }, item.title);\n      })), categoryType / 1 === 1 ? React.createElement(ListStyleSnd, {\n        data: ListData,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }) : React.createElement(ListStyleOne, {\n        data: ListData,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return LookPoetry;\n}(Component);\n\nexport { LookPoetry as default };","map":{"version":3,"sources":["/Users/HeroMeiKong/JobSpace/JavaScriptWorks/foundao/ReactWeb/dh_h5/src/components/LookPoetry/index.js"],"names":["React","Component","$","ListStyleOne","ListStyleSnd","LookPoetry","props","getParameter","url","dataUrl","firstNav","sessionStorage","JSON","parse","history","push","firstNavList","categoryList","pageUrl","i","sign","listUrl","pagelink","window","location","href","indexOf","slice","lastIndexOf","setState","getData","state","ajax","type","dataType","data","getCurrType","LookList","categoryType","category","getListData","length","changeSee","item","match","nextProps","nextContext","params","name","ListData","prevProps","prevState","snapshot","tp","getItem","document","scrollTop","_this","getTalkData","resp","talkall","itemList","map","index","bind","title"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport $ from 'jquery';\nimport './index.scss'\nimport ListStyleOne from '../ListStyleOne/index';\nimport ListStyleSnd from '../ListStyleSnd/index';\nexport default class LookPoetry extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data:{},//推荐页所有数据\n      LookList:[],\n      categoryType:1,//页面样式\n    };\n  }\n\n\n  componentWillReceiveProps(nextProps, nextContext) {\n    this.getParameter(nextProps.match.params.name);\n    this.setState({\n      // sign:'',\n      ListData:[],\n      // url:''\n    })\n  }\n\n  /*获取数据接口*/\n  getParameter = (url)=>{\n    let dataUrl ='';\n    let firstNav;\n    if(sessionStorage.firstNav){\n      firstNav=JSON.parse(sessionStorage.firstNav);\n    }else {\n      this.props.history.push('/');\n      return false\n    }\n    let firstNavList = firstNav.categoryList;\n    let pageUrl = url;\n    for (let i in firstNavList){\n      if (pageUrl === firstNavList[i].sign){\n        dataUrl=firstNavList[i].listUrl\n      }\n    }\n    // console.log(dataUrl)\n    let pagelink = window.location.href;\n    let sign ='';\n    if (pagelink.indexOf('?type=')===-1){\n      sign=''\n    } else{\n      sign = pagelink.slice(pagelink.lastIndexOf('?type=')+6);\n    }\n    this.setState({\n      dataUrl,\n      sign\n    },function () {\n      this.getData();\n    })\n  };\n  componentWillMount() {\n    this.getParameter(this.props.match.params.name)\n  }\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    let tp = window.sessionStorage.getItem('top');\n    $(document).scrollTop(tp);\n  }\n\n  componentDidMount() {\n    let _this=this;\n    window.getTalkData=(resp)=>{\n      _this.setState({\n        talkall:resp.data,\n        LookList:resp.data.categoryList||[]\n      },()=>{\n        _this.getListData();\n        _this.getCurrType();\n      })\n    }\n    window.LookList=function (resp) {\n      // console.log(resp)\n      _this.setState({\n        ListData:resp.data.itemList||[]\n      })\n    }\n  }\n\n  /*获取页面数据*/\n  getData=()=>{\n    const {dataUrl} = this.state;\n    $.ajax({\n      type:'GET',\n      dataType: \"jsonp\",\n      url:'http://m.app.cctv.com/json/jsonp?url='+dataUrl+'&cb=getTalkData',\n      data:{},\n    })\n  };\n\n  /*判断当前类型*/\n  getCurrType=()=>{\n    const {sign,LookList} = this.state;\n    // console.log(sign,'sign');\n    // console.log(LookList,'LookList')\n    if (!sign){\n      this.setState({\n        categoryType:LookList[0].category\n      })\n    } else {\n      for (let i in LookList){\n        if (sign === LookList[i].sign) {\n          if (LookList[i].category/1===2){\n            this.setState({\n              categoryType:2\n            })\n          } else {\n            this.setState({\n              categoryType:1\n            })\n          }\n        }\n      }\n    }\n  };\n\n  /*请求列表数据*/\n  getListData=()=>{\n    let {sign , url , LookList} = this.state;\n    url = LookList[0].listUrl;\n    if(sign.length>0){\n      for (let i in LookList){\n        if (sign===LookList[i].sign){\n          url = LookList[i].listUrl;\n          break;\n        }\n      }\n    }else {\n      url = LookList[0].listUrl\n    }\n    $.ajax({\n      url:'http://m.app.cctv.com/json/jsonp?url='+url+'&cb=LookList',\n      dataType:'jsonp',\n      type:'GET'\n    })\n  };\n  /*切换数据*/\n  changeSee=(item)=>{\n    let pagelink = this.props.match.url;\n    this.props.history.push(pagelink+'?type='+item.sign);\n  };\n  render() {\n    const {LookList ,ListData, categoryType, sign} = this.state;\n    // console.log(categoryType)\n    return (\n      <div className='lookStyle_1-box'>\n          <ul className='lookNav'>\n            {\n              LookList.map((item,index)=>{\n                return <li\n                  className={sign===''&&index===0?\"active\":sign === item.sign?'active':''}\n                  onClick={this.changeSee.bind(this,item)} key={'look'+index}>{item.title}</li>\n              })\n            }\n          </ul>\n        { categoryType / 1===1 ?\n          <ListStyleSnd data={ListData}/>\n            :\n          <ListStyleOne data={ListData}/>\n        }\n\n      </div>\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}